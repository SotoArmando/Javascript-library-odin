<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Document</title>
  </head>

  <body>
    <form action="#" class="form">
      <h2 class="form_title">
        Enter Book details here:
      </h2>

      <div class="input">
        <label for="book_title">
          Book Title
          <input type="text" name="title" id="book_title" required />
        </label>
      </div>

      <div class="input">
        <label for="book_shortdescription">
          Short Description
          <input
            type="text"
            name="shortdescription"
            id="book_shortdescription"
            required
          />
        </label>
      </div>

      <div class="input">
        <label for="book_author">
          Book Author
          <input type="text" name="author" id="book_author" required />
        </label>
      </div>

      <div class="input">
        <label for="book_pages">
          No of Pages
          <input type="number" name="pages" id="book_pages" required />
        </label>
      </div>

      <div class="input">
        <button type="button" id="add_book">Add Book</button>
      </div>
    </form>
    <book-list id="list-of-objects"> </book-list>
  </body>
</html>
<script>
  let myLibrary = [];

  // all deleted items
  let recycler = [];

  function Book(title, shortdescription, pages, author) {
    this.title = title;
    this.shortdescription = shortdescription;
    this.pages = pages;
    this.author = author;
  }

  function addBookToLibrary() {
    const book = new Book();
    let validEntry = true;
    const bookDetails = document.querySelectorAll("input");
    const getBookDetails = ({ name, value, validity: { valid } }) => {
      if (!valid) {
        validEntry = valid;
      }
      book[`${name}`] = value;
    };

    bookDetails.forEach(getBookDetails);
    if (validEntry) {
      myLibrary.push(book);
    }
    render();
  }

  function removeBookFromLibrary(index) {
    recycler.push(myLibrary.splice(index, 1));
  }

  function render() {
    let render = myLibrary
      .map(
        book => `
            <book>
                <book-title>${book.title}</book-title>
                <book-shortdescription>${book.shortdescription}</book-shortdescription>
                <book-author>${book.author}</book-author>
                <book-pages>${book.pages}</book-pages>
            </book>
        `
      )
      .join("");

    document.querySelector("#list-of-objects").innerHTML = render;
  }

  const button = document.querySelector("#add_book");
  const validateInput = () => {};
  button.addEventListener("click", addBookToLibrary);

  const startApp = () => {
    render();
  };
</script>
